# -*- mode: ruby -*-
# vi: set ft=ruby :
Vagrant.configure(2) do |config|
  config.vm.box = "rockylinux/8"
  config.vm.box_version = "4.0.0"
config.vm.define "server" do |server|
  server.vm.hostname = "server.loc"
  server.vm.network "private_network", ip: "192.168.10.10"
  server.vm.network "forwarded_port", guest: 8080, host: 8080
  server.vm.network "forwarded_port", guest: 8081, host: 8081
  server.vm.network "forwarded_port", guest: 8082, host: 8082
  server.vm.provision "shell", run: "always", path: "ssh_password_on.sh"
end
  
config.vm.define "ansible" do |ansible|
  ansible.vm.hostname = "ansible"
  ansible.vm.network "private_network", ip: "192.168.10.30"
  ansible.vm.provision "shell", run: "always", path: "ansible_install.sh"
  ansible.vm.provision "shell", run: "always", inline: <<-SHELL
          cp -r /vagrant/ /vagrant-new/    
		      SHELL

end

end